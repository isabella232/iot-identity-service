<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1099" height="633" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1099px;height:633px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1099 633" zoomAndPan="magnify"><defs><filter id="fpwrczed7qei5" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text x="493.25" y="26.699" fill="#000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="106">Device Setup</text><rect style="stroke:#a80036;stroke-width:1" width="597" height="583.031" x="491.5" y="39.094" fill="#ADD8E6"/><text x="767.5" y="51.154" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42">Device</text><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="187" x2="187" y1="93.734" y2="583.719"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="525.5" x2="525.5" y1="93.734" y2="583.719"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="627.5" x2="627.5" y1="93.734" y2="583.719"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="758.5" x2="758.5" y1="93.734" y2="583.719"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="877.5" x2="877.5" y1="93.734" y2="583.719"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1010.5" x2="1010.5" y1="93.734" y2="583.719"/><rect style="stroke:#a80036;stroke-width:1.5" width="72" height="30.406" x="149" y="58.328" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="156" y="78.316" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58">Operator</text><rect style="stroke:#a80036;stroke-width:1.5" width="72" height="30.406" x="149" y="582.719" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="156" y="602.707" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58">Operator</text><rect style="stroke:#a80036;stroke-width:1.5" width="57" height="30.406" x="495.5" y="58.328" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="502.5" y="78.316" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43">Device</text><rect style="stroke:#a80036;stroke-width:1.5" width="57" height="30.406" x="495.5" y="582.719" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="502.5" y="602.707" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43">Device</text><rect style="stroke:#a80036;stroke-width:1.5" width="119" height="30.406" x="566.5" y="58.328" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="573.5" y="78.316" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105">Module Runtime</text><rect style="stroke:#a80036;stroke-width:1.5" width="119" height="30.406" x="566.5" y="582.719" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="573.5" y="602.707" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105">Module Runtime</text><rect style="stroke:#a80036;stroke-width:1.5" width="114" height="30.406" x="699.5" y="58.328" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="706.5" y="78.316" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100">Identity Service</text><rect style="stroke:#a80036;stroke-width:1.5" width="114" height="30.406" x="699.5" y="582.719" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="706.5" y="602.707" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100">Identity Service</text><rect style="stroke:#a80036;stroke-width:1.5" width="96" height="30.406" x="827.5" y="58.328" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="834.5" y="78.316" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82">Keys Service</text><rect style="stroke:#a80036;stroke-width:1.5" width="96" height="30.406" x="827.5" y="582.719" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="834.5" y="602.707" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82">Keys Service</text><rect style="stroke:#a80036;stroke-width:1.5" width="143" height="30.406" x="937.5" y="58.328" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="944.5" y="78.316" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129">Certificates Service</text><rect style="stroke:#a80036;stroke-width:1.5" width="143" height="30.406" x="937.5" y="582.719" fill="#FEFECE" filter="url(#fpwrczed7qei5)"/><text x="944.5" y="602.707" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129">Certificates Service</text><polygon fill="#A80036" points="514 120.969 524 124.969 514 128.969 518 124.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="520" y1="124.969" y2="124.969"/><text x="194" y="119.795" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">1</text><text x="205" y="119.795" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258">Install OS and HSM-specific PKCS#11 library</text><polygon fill="#A80036" points="514 165.438 524 169.438 514 173.438 518 169.438" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="520" y1="169.438" y2="169.438"/><text x="194" y="156.647" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">2</text><text x="205" y="149.029" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189">Generate new private key in HSM</text><text x="205" y="164.264" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304">(via pkcs11-tool, p11tool, provider-specific tool, etc)</text><polygon fill="#A80036" points="514 209.906 524 213.906 514 217.906 518 213.906" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="520" y1="213.906" y2="213.906"/><text x="194" y="201.115" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">3</text><text x="205" y="193.498" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286">Create CSR for bootstrap ID cert using private key</text><text x="205" y="208.732" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99">(via openssl, etc)</text><line style="stroke:#a80036;stroke-width:1" x1="187" x2="229" y1="243.141" y2="243.141"/><line style="stroke:#a80036;stroke-width:1" x1="229" x2="229" y1="243.141" y2="256.141"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="229" y1="256.141" y2="256.141"/><polygon fill="#A80036" points="198 252.141 188 256.141 198 260.141 194 256.141" style="stroke:#a80036;stroke-width:1"/><text x="194" y="237.967" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">4</text><text x="205" y="237.967" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195">Sign CSR using device identity CA</text><polygon fill="#A80036" points="514 281.375 524 285.375 514 289.375 518 285.375" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="520" y1="285.375" y2="285.375"/><text x="194" y="280.201" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">5</text><text x="205" y="280.201" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232">Save bootstrap ID cert on the filesystem</text><polygon fill="#A80036" points="865.5 323.227 875.5 327.227 865.5 331.227 869.5 327.227" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="871.5" y1="327.227" y2="327.227"/><text x="194" y="322.053" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">6</text><text x="205" y="322.053" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="379">Configure Keys Service to preload the bootstrap cert&apos;s private key</text><path fill="#FBFB77" d="M8,298.375 L8,338.375 L178,338.375 L178,308.375 L168,298.375 L8,298.375" filter="url(#fpwrczed7qei5)" style="stroke:#a80036;stroke-width:1"/><path fill="#FBFB77" d="M168,298.375 L168,308.375 L178,308.375 L168,298.375" style="stroke:#a80036;stroke-width:1"/><text x="14" y="315.435" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149">See [1] below diagram for</text><text x="14" y="330.67" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130">configuration example</text><polygon fill="#A80036" points="999 377.695 1009 381.695 999 385.695 1003 381.695" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="1005" y1="381.695" y2="381.695"/><text x="194" y="376.522" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">7</text><text x="205" y="376.522" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342">Configure Certificates Service to preload the bootstrap cert</text><path fill="#FBFB77" d="M8,352.8438 L8,392.8438 L178,392.8438 L178,362.8438 L168,352.8438 L8,352.8438" filter="url(#fpwrczed7qei5)" style="stroke:#a80036;stroke-width:1"/><path fill="#FBFB77" d="M168,352.8438 L168,362.8438 L178,362.8438 L168,352.8438" style="stroke:#a80036;stroke-width:1"/><text x="14" y="369.904" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149">See [2] below diagram for</text><text x="14" y="385.139" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130">configuration example</text><polygon fill="#A80036" points="746.5 432.164 756.5 436.164 746.5 440.164 750.5 436.164" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="752.5" y1="436.164" y2="436.164"/><text x="194" y="430.99" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">8</text><text x="205" y="430.99" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="372">Configure Identity Service with device provisioning configuration</text><path fill="#FBFB77" d="M8,407.3125 L8,447.3125 L178,447.3125 L178,417.3125 L168,407.3125 L8,407.3125" filter="url(#fpwrczed7qei5)" style="stroke:#a80036;stroke-width:1"/><path fill="#FBFB77" d="M168,407.3125 L168,417.3125 L178,417.3125 L168,407.3125" style="stroke:#a80036;stroke-width:1"/><text x="14" y="424.373" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149">See [3] below diagram for</text><text x="14" y="439.607" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130">configuration example</text><polygon fill="#A80036" points="616 474.016 626 478.016 616 482.016 620 478.016" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="622" y1="478.016" y2="478.016"/><text x="194" y="472.842" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">9</text><text x="205" y="472.842" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125">Start Module Runtime</text><polygon fill="#A80036" points="746.5 503.25 756.5 507.25 746.5 511.25 750.5 507.25" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="752.5" y1="507.25" y2="507.25"/><text x="194" y="502.076" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">10</text><text x="212" y="502.076" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119">Start Identity Service</text><polygon fill="#A80036" points="865.5 532.484 875.5 536.484 865.5 540.484 869.5 536.484" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="871.5" y1="536.484" y2="536.484"/><text x="194" y="531.311" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">11</text><text x="212" y="531.311" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105">Start Keys Service</text><polygon fill="#A80036" points="999 561.719 1009 565.719 999 569.719 1003 565.719" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="187" x2="1005" y1="565.719" y2="565.719"/><text x="194" y="560.545" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">12</text><text x="212" y="560.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143">Start Certificates Service</text></g></svg>