<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1804" height="3188" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1804px;height:3188px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1804 3188" zoomAndPan="magnify"><defs><filter id="f735j1mxl357c" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text x="823.75" y="26.699" fill="#000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="151">Runtime Operation</text><rect style="stroke:#a80036;stroke-width:1" width="1152" height="3137.953" x="627.5" y="39.094" fill="#ADD8E6"/><text x="1181" y="51.154" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42">Device</text><rect style="stroke:#a80036;stroke-width:1" width="10" height="113.703" x="70.5" y="2382.188" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="304.781" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="101.938" x="342.5" y="560.656" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="795.766" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="101.938" x="342.5" y="1100.047" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="1231.219" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="1415.859" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="101.938" x="342.5" y="2988.297" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="680.5" y="401.484" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="680.5" y="459.953" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="128.938" x="680.5" y="899.641" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="160.406" x="680.5" y="1313.922" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="680.5" y="1503.563" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="71.469" x="680.5" y="1856.125" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="675" x="680.5" y="1971.719" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="40.234" x="685.5" y="2033.188" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="40.234" x="685.5" y="2132.547" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="44.469" x="680.5" y="2714.188" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="128.938" x="680.5" y="2787.891" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="711.5" height="221.875" x="294" y="127.141" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="674.5" height="148.406" x="304" y="193.609" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="951.5" height="307.578" x="304" y="363.016" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="1491.5" height="970.422" x="294" y="684.594" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="1001" height="265.344" x="304" y="1275.453" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="1742.5" height="1436.219" x="13" y="1669.016" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="1530" height="968.469" x="23" y="1693.25" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#000;stroke-width:2" width="1510" height="837.063" x="33" y="1817.656" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:none;stroke-width:1" width="1510" height="719.125" x="33" y="1935.594" fill="#FFF"/><rect style="stroke:#000;stroke-width:2" width="342" height="243.297" x="621.5" y="1986.719" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:none;stroke-width:1" width="342" height="141.594" x="621.5" y="2088.422" fill="#FFF"/><rect style="stroke:#000;stroke-width:2" width="959.5" height="274.766" x="43" y="2286.25" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:none;stroke-width:1" width="959.5" height="57.125" x="43" y="2503.891" fill="#FFF"/><rect style="stroke:#000;stroke-width:2" width="1441.5" height="422.516" x="304" y="2675.719" fill="#FFF" filter="url(#f735j1mxl357c)"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="75" x2="75" y1="110.141" y2="3122.234"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="347" x2="347" y1="110.141" y2="3122.234"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="685.5" x2="685.5" y1="110.141" y2="3122.234"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1007.5" x2="1007.5" y1="110.141" y2="3122.234"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1250" x2="1250" y1="865.703" y2="3122.234"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1495" x2="1495" y1="1580.5" y2="3122.234"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1740.5" x2="1740.5" y1="1634.109" y2="3122.234"/><rect style="stroke:#a80036;stroke-width:1.5" width="41" height="30.406" x="53" y="74.734" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="60" y="94.723" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27">EST</text><rect style="stroke:#a80036;stroke-width:1.5" width="41" height="30.406" x="53" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="60" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27">EST</text><rect style="stroke:#a80036;stroke-width:1.5" width="63" height="30.406" x="314" y="74.734" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="321" y="94.723" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49">IoT Hub</text><rect style="stroke:#a80036;stroke-width:1.5" width="63" height="30.406" x="314" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="321" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49">IoT Hub</text><rect style="stroke:#a80036;stroke-width:1.5" width="104" height="30.406" x="631.5" y="74.734" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="638.5" y="94.723" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90">Edge Runtime</text><rect style="stroke:#a80036;stroke-width:1.5" width="104" height="30.406" x="631.5" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="638.5" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90">Edge Runtime</text><rect style="stroke:#a80036;stroke-width:1.5" width="102" height="30.406" x="954.5" y="74.734" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="961.5" y="94.723" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88">Host Process</text><rect style="stroke:#a80036;stroke-width:1.5" width="102" height="30.406" x="954.5" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="961.5" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88">Host Process</text><rect style="stroke:#a80036;stroke-width:1.5" width="85" height="30.406" x="1206" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="1213" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71">EdgeAgent</text><rect style="stroke:#a80036;stroke-width:1.5" width="71" height="30.406" x="1458" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="1465" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57">EdgeHub</text><rect style="stroke:#a80036;stroke-width:1.5" width="66" height="46.813" x="1705.5" y="3121.234" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="1712.5" y="3141.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52">Custom</text><text x="1715" y="3157.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47">Module</text><rect style="stroke:#a80036;stroke-width:1" width="10" height="113.703" x="70.5" y="2382.188" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="304.781" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="101.938" x="342.5" y="560.656" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="795.766" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="101.938" x="342.5" y="1100.047" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="1231.219" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="342.5" y="1415.859" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="101.938" x="342.5" y="2988.297" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="680.5" y="401.484" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="680.5" y="459.953" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="128.938" x="680.5" y="899.641" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="160.406" x="680.5" y="1313.922" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="29.234" x="680.5" y="1503.563" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="71.469" x="680.5" y="1856.125" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="675" x="680.5" y="1971.719" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="40.234" x="685.5" y="2033.188" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="40.234" x="685.5" y="2132.547" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="44.469" x="680.5" y="2714.188" fill="#FFF" filter="url(#f735j1mxl357c)"/><rect style="stroke:#a80036;stroke-width:1" width="10" height="128.938" x="680.5" y="2787.891" fill="#FFF" filter="url(#f735j1mxl357c)"/><path fill="#EEE" d="M294,127.1406 L462,127.1406 L462,134.1406 L452,144.1406 L294,144.1406 L294,127.1406" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="711.5" height="221.875" x="294" y="127.141" fill="none"/><text x="309" y="140.201" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123">Host-level modules</text><line style="stroke:#a80036;stroke-width:1" x1="685.5" x2="727.5" y1="165.609" y2="165.609"/><line style="stroke:#a80036;stroke-width:1" x1="727.5" x2="727.5" y1="165.609" y2="178.609"/><line style="stroke:#a80036;stroke-width:1" x1="686.5" x2="727.5" y1="178.609" y2="178.609"/><polygon fill="#A80036" points="696.5 174.609 686.5 178.609 696.5 182.609 692.5 178.609" style="stroke:#a80036;stroke-width:1"/><text x="692.5" y="160.435" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">1</text><text x="703.5" y="160.435" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290">Read host-level module names from configuration</text><path fill="#EEE" d="M304,193.6094 L377,193.6094 L377,200.6094 L367,210.6094 L304,210.6094 L304,193.6094" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="674.5" height="148.406" x="304" y="193.609" fill="none"/><text x="319" y="206.67" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28">loop</text><text x="392" y="205.815" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222">[for creating each host-level module M]</text><line style="stroke:#a80036;stroke-width:1" x1="685.5" x2="727.5" y1="247.313" y2="247.313"/><line style="stroke:#a80036;stroke-width:1" x1="727.5" x2="727.5" y1="247.313" y2="260.313"/><line style="stroke:#a80036;stroke-width:1" x1="686.5" x2="727.5" y1="260.313" y2="260.313"/><polygon fill="#A80036" points="696.5 256.313 686.5 260.313 696.5 264.313 692.5 260.313" style="stroke:#a80036;stroke-width:1"/><text x="692.5" y="234.522" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">2</text><text x="703.5" y="226.904" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249">Derive Edge Hub SAS keys from its name +</text><text x="703.5" y="242.139" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263">generation ID using the master encryption key</text><polygon fill="#A80036" points="363.5 300.781 353.5 304.781 363.5 308.781 359.5 304.781" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="684.5" y1="304.781" y2="304.781"/><text x="369.5" y="291.99" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">3</text><text x="380.5" y="284.373" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256">Create identity for module M and register the</text><text x="380.5" y="299.607" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132">derived SAS keys for it</text><polygon fill="#A80036" points="673.5 330.016 683.5 334.016 673.5 338.016 677.5 334.016" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="679.5" y1="334.016" y2="334.016"/><text x="354.5" y="328.842" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">4</text><path fill="#EEE" d="M304,363.0156 L500,363.0156 L500,370.0156 L490,380.0156 L304,380.0156 L304,363.0156" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="951.5" height="307.578" x="304" y="363.016" fill="none"/><text x="319" y="376.076" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151">Host process operation</text><polygon fill="#A80036" points="701.5 397.484 691.5 401.484 701.5 405.484 697.5 401.484" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1006.5" y1="401.484" y2="401.484"/><text x="707.5" y="396.31" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">5</text><text x="718.5" y="396.31" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167">Get identity for Host process</text><polygon fill="#A80036" points="995.5 426.719 1005.5 430.719 995.5 434.719 999.5 430.719" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1001.5" y1="430.719" y2="430.719"/><text x="692.5" y="425.545" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">6</text><polygon fill="#A80036" points="701.5 455.953 691.5 459.953 701.5 463.953 697.5 459.953" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1006.5" y1="459.953" y2="459.953"/><text x="707.5" y="454.779" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">7</text><text x="718.5" y="454.779" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246">Get SAS token for identifying with IoT Hub</text><polygon fill="#A80036" points="995.5 485.188 1005.5 489.188 995.5 493.188 999.5 489.188" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1001.5" y1="489.188" y2="489.188"/><text x="692.5" y="484.014" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">8</text><line style="stroke:#a80036;stroke-width:1" x1="1007.5" x2="1049.5" y1="518.422" y2="518.422"/><line style="stroke:#a80036;stroke-width:1" x1="1049.5" x2="1049.5" y1="518.422" y2="531.422"/><line style="stroke:#a80036;stroke-width:1" x1="1008.5" x2="1049.5" y1="531.422" y2="531.422"/><polygon fill="#A80036" points="1018.5 527.422 1008.5 531.422 1018.5 535.422 1014.5 531.422" style="stroke:#a80036;stroke-width:1"/><text x="1014.5" y="513.248" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">9</text><text x="1025.5" y="513.248" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218">Create IoT Hub client using Sas token</text><polygon fill="#A80036" points="363.5 556.656 353.5 560.656 363.5 564.656 359.5 560.656" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="1006.5" y1="560.656" y2="560.656"/><text x="369.5" y="555.482" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">10</text><text x="387.5" y="555.482" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108">Connect to Iot Hub</text><line style="stroke:#a80036;stroke-width:1" x1="352.5" x2="394.5" y1="620.359" y2="620.359"/><line style="stroke:#a80036;stroke-width:1" x1="394.5" x2="394.5" y1="620.359" y2="633.359"/><line style="stroke:#a80036;stroke-width:1" x1="353.5" x2="394.5" y1="633.359" y2="633.359"/><polygon fill="#A80036" points="363.5 629.359 353.5 633.359 363.5 637.359 359.5 633.359" style="stroke:#a80036;stroke-width:1"/><text x="359.5" y="599.951" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">11</text><text x="377.5" y="584.717" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262">Validate SAS token against SAS key that was</text><text x="377.5" y="599.951" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256">registered when the Edge Agent identity was</text><text x="377.5" y="615.186" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128">created by the runtime</text><polygon fill="#A80036" points="995.5 658.594 1005.5 662.594 995.5 666.594 999.5 662.594" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="1001.5" y1="662.594" y2="662.594"/><text x="354.5" y="657.42" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">12</text><text x="372.5" y="657.42" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17">OK</text><path fill="#EEE" d="M294,684.5938 L477,684.5938 L477,691.5938 L467,701.5938 L294,701.5938 L294,684.5938" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1491.5" height="970.422" x="294" y="684.594" fill="none"/><text x="309" y="697.654" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138">Edge Agent operation</text><line style="stroke:#a80036;stroke-width:1" x1="685.5" x2="727.5" y1="738.297" y2="738.297"/><line style="stroke:#a80036;stroke-width:1" x1="727.5" x2="727.5" y1="738.297" y2="751.297"/><line style="stroke:#a80036;stroke-width:1" x1="686.5" x2="727.5" y1="751.297" y2="751.297"/><polygon fill="#A80036" points="696.5 747.297 686.5 751.297 696.5 755.297 692.5 751.297" style="stroke:#a80036;stroke-width:1"/><text x="692.5" y="725.506" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">13</text><text x="710.5" y="717.889" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279">Derive SAS keys for Edge Agent from its name +</text><text x="710.5" y="733.123" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263">generation ID using the master encryption key</text><polygon fill="#A80036" points="363.5 791.766 353.5 795.766 363.5 799.766 359.5 795.766" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="684.5" y1="795.766" y2="795.766"/><text x="369.5" y="782.975" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">14</text><text x="387.5" y="775.357" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265">Create identity for Edge Agent and register the</text><text x="387.5" y="790.592" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132">derived SAS keys for it</text><polygon fill="#A80036" points="673.5 821 683.5 825 673.5 829 677.5 825" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="679.5" y1="825" y2="825"/><text x="354.5" y="819.826" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">15</text><polygon fill="#A80036" points="1194 850.234 1204 854.234 1194 858.234 1198 854.234" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="685.5" x2="1200" y1="854.234" y2="854.234"/><text x="692.5" y="849.061" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">16</text><text x="710.5" y="849.061" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91">Create and start</text><rect style="stroke:#a80036;stroke-width:1.5" width="85" height="30.406" x="1206" y="833" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="1213" y="852.988" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71">EdgeAgent</text><polygon fill="#A80036" points="701.5 895.641 691.5 899.641 701.5 903.641 697.5 899.641" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1249.5" y1="899.641" y2="899.641"/><text x="707.5" y="894.467" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">17</text><text x="725.5" y="894.467" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246">Get SAS token for identifying with IoT Hub</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="944.109" y2="944.109"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="944.109" y2="957.109"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="957.109" y2="957.109"/><polygon fill="#A80036" points="701.5 953.109 691.5 957.109 701.5 961.109 697.5 957.109" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="931.318" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">18</text><text x="715.5" y="923.701" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259">Derive Edge Agent SAS keys from its name +</text><text x="715.5" y="938.936" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263">generation ID using the master encryption key</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="986.344" y2="986.344"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="986.344" y2="999.344"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="999.344" y2="999.344"/><polygon fill="#A80036" points="701.5 995.344 691.5 999.344 701.5 1003.344 697.5 999.344" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="981.17" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">19</text><text x="715.5" y="981.17" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185">Create SAS token from SAS key</text><polygon fill="#A80036" points="1238.5 1024.578 1248.5 1028.578 1238.5 1032.578 1242.5 1028.578" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1244.5" y1="1028.578" y2="1028.578"/><text x="692.5" y="1023.404" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">20</text><text x="710.5" y="1023.404" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62">SAS token</text><line style="stroke:#a80036;stroke-width:1" x1="1250.5" x2="1292.5" y1="1057.813" y2="1057.813"/><line style="stroke:#a80036;stroke-width:1" x1="1292.5" x2="1292.5" y1="1057.813" y2="1070.813"/><line style="stroke:#a80036;stroke-width:1" x1="1251.5" x2="1292.5" y1="1070.813" y2="1070.813"/><polygon fill="#A80036" points="1261.5 1066.813 1251.5 1070.813 1261.5 1074.813 1257.5 1070.813" style="stroke:#a80036;stroke-width:1"/><text x="1257.5" y="1052.639" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">21</text><text x="1275.5" y="1052.639" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213">Create IoT Hub client with SAS token</text><polygon fill="#A80036" points="363.5 1096.047 353.5 1100.047 363.5 1104.047 359.5 1100.047" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="1249.5" y1="1100.047" y2="1100.047"/><text x="369.5" y="1094.873" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">22</text><text x="387.5" y="1094.873" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113">Connect to IoT Hub</text><line style="stroke:#a80036;stroke-width:1" x1="352.5" x2="394.5" y1="1159.75" y2="1159.75"/><line style="stroke:#a80036;stroke-width:1" x1="394.5" x2="394.5" y1="1159.75" y2="1172.75"/><line style="stroke:#a80036;stroke-width:1" x1="353.5" x2="394.5" y1="1172.75" y2="1172.75"/><polygon fill="#A80036" points="363.5 1168.75 353.5 1172.75 363.5 1176.75 359.5 1172.75" style="stroke:#a80036;stroke-width:1"/><text x="359.5" y="1139.342" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">23</text><text x="377.5" y="1124.107" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262">Validate SAS token against SAS key that was</text><text x="377.5" y="1139.342" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256">registered when the Edge Agent identity was</text><text x="377.5" y="1154.576" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128">created by the runtime</text><polygon fill="#A80036" points="1238.5 1197.984 1248.5 1201.984 1238.5 1205.984 1242.5 1201.984" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="1244.5" y1="1201.984" y2="1201.984"/><text x="354.5" y="1196.811" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">24</text><text x="372.5" y="1196.811" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17">OK</text><polygon fill="#A80036" points="363.5 1227.219 353.5 1231.219 363.5 1235.219 359.5 1231.219" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="1249.5" y1="1231.219" y2="1231.219"/><text x="369.5" y="1226.045" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">25</text><text x="387.5" y="1226.045" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92">Get deployment</text><polygon fill="#A80036" points="1238.5 1256.453 1248.5 1260.453 1238.5 1264.453 1242.5 1260.453" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="1244.5" y1="1260.453" y2="1260.453"/><text x="354.5" y="1255.279" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">26</text><path fill="#EEE" d="M304,1275.4531 L377,1275.4531 L377,1282.4531 L367,1292.4531 L304,1292.4531 L304,1275.4531" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1001" height="265.344" x="304" y="1275.453" fill="none"/><text x="319" y="1288.514" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28">loop</text><text x="392" y="1287.658" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112">[for each module M]</text><polygon fill="#A80036" points="701.5 1309.922 691.5 1313.922 701.5 1317.922 697.5 1313.922" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1249.5" y1="1313.922" y2="1313.922"/><text x="707.5" y="1308.748" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">27</text><text x="725.5" y="1308.748" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163">Create identity for module M</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="1358.391" y2="1358.391"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="1358.391" y2="1371.391"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="1371.391" y2="1371.391"/><polygon fill="#A80036" points="701.5 1367.391 691.5 1371.391 701.5 1375.391 697.5 1371.391" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="1345.6" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">28</text><text x="715.5" y="1337.982" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250">Derive module M SAS keys from its name +</text><text x="715.5" y="1353.217" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263">generation ID using the master encryption key</text><polygon fill="#A80036" points="363.5 1411.859 353.5 1415.859 363.5 1419.859 359.5 1415.859" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="679.5" y1="1415.859" y2="1415.859"/><text x="369.5" y="1403.068" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">29</text><text x="387.5" y="1395.451" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256">Create identity for module M and register the</text><text x="387.5" y="1410.686" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132">derived SAS keys for it</text><polygon fill="#A80036" points="668.5 1441.094 678.5 1445.094 668.5 1449.094 672.5 1445.094" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="674.5" y1="1445.094" y2="1445.094"/><text x="354.5" y="1439.92" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">30</text><polygon fill="#A80036" points="1238.5 1470.328 1248.5 1474.328 1238.5 1478.328 1242.5 1474.328" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1244.5" y1="1474.328" y2="1474.328"/><text x="692.5" y="1469.154" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">31</text><polygon fill="#A80036" points="701.5 1499.563 691.5 1503.563 701.5 1507.563 697.5 1503.563" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1249.5" y1="1503.563" y2="1503.563"/><text x="707.5" y="1498.389" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">32</text><text x="725.5" y="1498.389" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75">Start module</text><polygon fill="#A80036" points="1238.5 1528.797 1248.5 1532.797 1238.5 1536.797 1242.5 1532.797" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1244.5" y1="1532.797" y2="1532.797"/><text x="692.5" y="1527.623" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">33</text><polygon fill="#A80036" points="1446 1565.031 1456 1569.031 1446 1573.031 1450 1569.031" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="685.5" x2="1452" y1="1569.031" y2="1569.031"/><text x="692.5" y="1563.857" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">34</text><text x="710.5" y="1563.857" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88">Start Edge Hub</text><rect style="stroke:#a80036;stroke-width:1.5" width="71" height="30.406" x="1458" y="1547.797" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="1465" y="1567.785" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57">EdgeHub</text><polygon fill="#A80036" points="1693.5 1610.438 1703.5 1614.438 1693.5 1618.438 1697.5 1614.438" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="685.5" x2="1699.5" y1="1614.438" y2="1614.438"/><text x="692.5" y="1609.264" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">35</text><text x="710.5" y="1609.264" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123">Start Custom module</text><rect style="stroke:#a80036;stroke-width:1.5" width="66" height="46.813" x="1705.5" y="1593.203" fill="#FEFECE" filter="url(#f735j1mxl357c)"/><text x="1712.5" y="1613.191" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52">Custom</text><text x="1715" y="1629.598" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47">Module</text><path fill="#EEE" d="M13,1669.0156 L184,1669.0156 L184,1676.0156 L174,1686.0156 L13,1686.0156 L13,1669.0156" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1742.5" height="1436.219" x="13" y="1669.016" fill="none"/><text x="28" y="1682.076" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126">Edge Hub operation</text><path fill="#EEE" d="M23,1693.25 L96,1693.25 L96,1700.25 L86,1710.25 L23,1710.25 L23,1693.25" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1530" height="968.469" x="23" y="1693.25" fill="none"/><text x="38" y="1706.311" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28">loop</text><text x="111" y="1705.455" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208">[for server cert request and renewal]</text><path fill="#FBFB77" d="M312,1715.4844 L312,1801.4844 L1054,1801.4844 L1054,1725.4844 L1044,1715.4844 L312,1715.4844" filter="url(#f735j1mxl357c)" style="stroke:#a80036;stroke-width:1"/><path fill="#FBFB77" d="M1044,1715.4844 L1044,1725.4844 L1054,1725.4844 L1044,1715.4844" style="stroke:#a80036;stroke-width:1"/><text x="318" y="1732.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="592">Note that a single server cert is shared between all modules, and its lifetime is managed by the runtime.</text><text x="318" y="1747.779" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="721">This is because the user may have module server certs rooted to public CAs, so it would cost the customer $$$ for each cert.</text><text x="318" y="1763.014" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="653">Thus we do not want to request a new server cert when a previously requested cert is still valid, which also means</text><text x="318" y="1778.248" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="718">we want to dedupe the server certs across all modules that want them. Since server certs are issued for the device hostname</text><text x="318" y="1793.482" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="397">anyway, reusing the server cert for multiple modules is not a concern.</text><path fill="#EEE" d="M33,1817.6563 L96,1817.6563 L96,1824.6563 L86,1834.6563 L33,1834.6563 L33,1817.6563" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1510" height="837.063" x="33" y="1817.656" fill="none"/><text x="48" y="1830.717" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18">alt</text><text x="111" y="1829.861" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227">[if server cert already exists and is valid]</text><polygon fill="#A80036" points="701.5 1852.125 691.5 1856.125 701.5 1860.125 697.5 1856.125" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1494.5" y1="1856.125" y2="1856.125"/><text x="707.5" y="1850.951" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">36</text><text x="725.5" y="1850.951" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83">Get server cert</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="1885.359" y2="1885.359"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="1885.359" y2="1898.359"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="1898.359" y2="1898.359"/><polygon fill="#A80036" points="701.5 1894.359 691.5 1898.359 701.5 1902.359 697.5 1898.359" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="1880.186" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">37</text><text x="715.5" y="1880.186" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259">Get persisted server cert PEM and private key</text><polygon fill="#A80036" points="1483.5 1923.594 1493.5 1927.594 1483.5 1931.594 1487.5 1927.594" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1489.5" y1="1927.594" y2="1927.594"/><text x="692.5" y="1922.42" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">38</text><text x="710.5" y="1922.42" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152">Server cert and private key</text><line style="stroke:#000;stroke-width:1;stroke-dasharray:2,2" x1="33" x2="1543" y1="1936.594" y2="1936.594"/><text x="38" y="1946.799" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="235">[if server cert does not exist or is expired]</text><polygon fill="#A80036" points="701.5 1967.719 691.5 1971.719 701.5 1975.719 697.5 1971.719" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1494.5" y1="1971.719" y2="1971.719"/><text x="707.5" y="1966.545" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">39</text><text x="725.5" y="1966.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83">Get server cert</text><path fill="#EEE" d="M621.5,1986.7188 L684.5,1986.7188 L684.5,1993.7188 L674.5,2003.7188 L621.5,2003.7188 L621.5,1986.7188" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="342" height="243.297" x="621.5" y="1986.719" fill="none"/><text x="636.5" y="1999.779" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18">alt</text><text x="699.5" y="1998.924" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163">[if server cert does not exist]</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="737.5" y1="2020.188" y2="2020.188"/><line style="stroke:#a80036;stroke-width:1" x1="737.5" x2="737.5" y1="2020.188" y2="2033.188"/><line style="stroke:#a80036;stroke-width:1" x1="696.5" x2="737.5" y1="2033.188" y2="2033.188"/><polygon fill="#A80036" points="706.5 2029.188 696.5 2033.188 706.5 2037.188 702.5 2033.188" style="stroke:#a80036;stroke-width:1"/><text x="702.5" y="2015.014" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">40</text><text x="720.5" y="2015.014" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231">Get persisted server cert and private key</text><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="695.5" x2="737.5" y1="2072.422" y2="2072.422"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="737.5" x2="737.5" y1="2072.422" y2="2085.422"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="690.5" x2="737.5" y1="2085.422" y2="2085.422"/><polygon fill="#A80036" points="700.5 2081.422 690.5 2085.422 700.5 2089.422 696.5 2085.422" style="stroke:#a80036;stroke-width:1"/><text x="702.5" y="2067.248" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">41</text><text x="720.5" y="2067.248" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82">Err(NotFound)</text><line style="stroke:#000;stroke-width:1;stroke-dasharray:2,2" x1="621.5" x2="963.5" y1="2089.422" y2="2089.422"/><text x="626.5" y="2099.627" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288">[if server cert exists but is expired / close to expiry]</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="737.5" y1="2119.547" y2="2119.547"/><line style="stroke:#a80036;stroke-width:1" x1="737.5" x2="737.5" y1="2119.547" y2="2132.547"/><line style="stroke:#a80036;stroke-width:1" x1="696.5" x2="737.5" y1="2132.547" y2="2132.547"/><polygon fill="#A80036" points="706.5 2128.547 696.5 2132.547 706.5 2136.547 702.5 2132.547" style="stroke:#a80036;stroke-width:1"/><text x="702.5" y="2114.373" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">42</text><text x="720.5" y="2114.373" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231">Get persisted server cert and private key</text><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="695.5" x2="737.5" y1="2171.781" y2="2171.781"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="737.5" x2="737.5" y1="2171.781" y2="2184.781"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="690.5" x2="737.5" y1="2184.781" y2="2184.781"/><polygon fill="#A80036" points="700.5 2180.781 690.5 2184.781 700.5 2188.781 696.5 2184.781" style="stroke:#a80036;stroke-width:1"/><text x="702.5" y="2166.607" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">43</text><text x="720.5" y="2166.607" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47">Ok(cert)</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2209.016" y2="2209.016"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2209.016" y2="2222.016"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2222.016" y2="2222.016"/><polygon fill="#A80036" points="701.5 2218.016 691.5 2222.016 701.5 2226.016 697.5 2222.016" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2203.842" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">44</text><text x="715.5" y="2203.842" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216">Server cert is expired / close to expiry</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2258.25" y2="2258.25"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2258.25" y2="2271.25"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2271.25" y2="2271.25"/><polygon fill="#A80036" points="701.5 2267.25 691.5 2271.25 701.5 2275.25 697.5 2271.25" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2253.076" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">45</text><text x="715.5" y="2253.076" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280">Create CSR for new module server cert using key</text><path fill="#EEE" d="M43,2286.25 L106,2286.25 L106,2293.25 L96,2303.25 L43,2303.25 L43,2286.25" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="959.5" height="274.766" x="43" y="2286.25" fill="none"/><text x="58" y="2299.311" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18">alt</text><text x="121" y="2298.455" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="228">[if module certs should be issued by EST]</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2324.719" y2="2324.719"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2324.719" y2="2337.719"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2337.719" y2="2337.719"/><polygon fill="#A80036" points="701.5 2333.719 691.5 2337.719 701.5 2341.719 697.5 2337.719" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2319.545" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">46</text><text x="715.5" y="2319.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275">Create TLS client using current EST identity cert</text><polygon fill="#A80036" points="91.5 2378.188 81.5 2382.188 91.5 2386.188 87.5 2382.188" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="85.5" x2="679.5" y1="2382.188" y2="2382.188"/><text x="97.5" y="2369.396" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">47</text><text x="115.5" y="2361.779" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296">Connect using TLS client and send request for new</text><text x="115.5" y="2377.014" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260">module server cert corresponding to the CSR</text><line style="stroke:#a80036;stroke-width:1" x1="80.5" x2="122.5" y1="2411.422" y2="2411.422"/><line style="stroke:#a80036;stroke-width:1" x1="122.5" x2="122.5" y1="2411.422" y2="2424.422"/><line style="stroke:#a80036;stroke-width:1" x1="81.5" x2="122.5" y1="2424.422" y2="2424.422"/><polygon fill="#A80036" points="91.5 2420.422 81.5 2424.422 91.5 2428.422 87.5 2424.422" style="stroke:#a80036;stroke-width:1"/><text x="87.5" y="2406.248" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">48</text><text x="105.5" y="2406.248" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230">Verify client cert against EST identity CA</text><line style="stroke:#a80036;stroke-width:1" x1="80.5" x2="122.5" y1="2453.656" y2="2453.656"/><line style="stroke:#a80036;stroke-width:1" x1="122.5" x2="122.5" y1="2453.656" y2="2466.656"/><line style="stroke:#a80036;stroke-width:1" x1="81.5" x2="122.5" y1="2466.656" y2="2466.656"/><polygon fill="#A80036" points="91.5 2462.656 81.5 2466.656 91.5 2470.656 87.5 2466.656" style="stroke:#a80036;stroke-width:1"/><text x="87.5" y="2448.482" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">49</text><text x="105.5" y="2448.482" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55">Sign CSR</text><polygon fill="#A80036" points="668.5 2491.891 678.5 2495.891 668.5 2499.891 672.5 2495.891" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="75.5" x2="674.5" y1="2495.891" y2="2495.891"/><text x="82.5" y="2490.717" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">50</text><text x="100.5" y="2490.717" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67">Signed cert</text><line style="stroke:#000;stroke-width:1;stroke-dasharray:2,2" x1="43" x2="1002.5" y1="2504.891" y2="2504.891"/><text x="48" y="2515.096" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="230">[if module certs should be minted locally]</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2540.016" y2="2540.016"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2540.016" y2="2553.016"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2553.016" y2="2553.016"/><polygon fill="#A80036" points="701.5 2549.016 691.5 2553.016 701.5 2557.016 697.5 2553.016" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2534.842" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">51</text><text x="715.5" y="2534.842" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175">Sign CSR using device CA cert</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2604.484" y2="2604.484"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2604.484" y2="2617.484"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2617.484" y2="2617.484"/><polygon fill="#A80036" points="701.5 2613.484 691.5 2617.484 701.5 2621.484 697.5 2617.484" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2591.693" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">52</text><text x="715.5" y="2584.076" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265">Save signed cert and key pair so that it can be</text><text x="715.5" y="2599.311" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271">retrieved for future module server cert requests</text><polygon fill="#A80036" points="1483.5 2642.719 1493.5 2646.719 1483.5 2650.719 1487.5 2646.719" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1489.5" y1="2646.719" y2="2646.719"/><text x="692.5" y="2641.545" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">53</text><text x="710.5" y="2641.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152">Server cert and private key</text><path fill="#EEE" d="M304,2675.7188 L474,2675.7188 L474,2682.7188 L464,2692.7188 L304,2692.7188 L304,2675.7188" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1441.5" height="422.516" x="304" y="2675.719" fill="none"/><text x="319" y="2688.779" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125">Connect to IoT Hub</text><polygon fill="#A80036" points="701.5 2710.188 691.5 2714.188 701.5 2718.188 697.5 2714.188" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1494.5" y1="2714.188" y2="2714.188"/><text x="707.5" y="2709.014" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">54</text><text x="725.5" y="2709.014" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112">Get IoTHub identity</text><polygon fill="#A80036" points="1483.5 2754.656 1493.5 2758.656 1483.5 2762.656 1487.5 2758.656" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1489.5" y1="2758.656" y2="2758.656"/><text x="692.5" y="2745.865" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">55</text><text x="710.5" y="2738.248" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292">Identity info (IoTHub + device identity + generation</text><text x="710.5" y="2753.482" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123">ID + credentials type)</text><polygon fill="#A80036" points="701.5 2783.891 691.5 2787.891 701.5 2791.891 697.5 2787.891" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="695.5" x2="1494.5" y1="2787.891" y2="2787.891"/><text x="707.5" y="2782.717" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">56</text><text x="725.5" y="2782.717" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246">Get SAS token for identifying with IoT Hub</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2832.359" y2="2832.359"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2832.359" y2="2845.359"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2845.359" y2="2845.359"/><polygon fill="#A80036" points="701.5 2841.359 691.5 2845.359 701.5 2849.359 697.5 2845.359" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2819.568" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">57</text><text x="715.5" y="2811.951" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249">Derive Edge Hub SAS keys from its name +</text><text x="715.5" y="2827.186" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263">generation ID using the master encryption key</text><line style="stroke:#a80036;stroke-width:1" x1="690.5" x2="732.5" y1="2874.594" y2="2874.594"/><line style="stroke:#a80036;stroke-width:1" x1="732.5" x2="732.5" y1="2874.594" y2="2887.594"/><line style="stroke:#a80036;stroke-width:1" x1="691.5" x2="732.5" y1="2887.594" y2="2887.594"/><polygon fill="#A80036" points="701.5 2883.594 691.5 2887.594 701.5 2891.594 697.5 2887.594" style="stroke:#a80036;stroke-width:1"/><text x="697.5" y="2869.42" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">58</text><text x="715.5" y="2869.42" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185">Create SAS token from SAS key</text><polygon fill="#A80036" points="1483.5 2912.828 1493.5 2916.828 1483.5 2920.828 1487.5 2916.828" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="685.5" x2="1489.5" y1="2916.828" y2="2916.828"/><text x="692.5" y="2911.654" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">59</text><text x="710.5" y="2911.654" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62">SAS token</text><line style="stroke:#a80036;stroke-width:1" x1="1495.5" x2="1537.5" y1="2946.063" y2="2946.063"/><line style="stroke:#a80036;stroke-width:1" x1="1537.5" x2="1537.5" y1="2946.063" y2="2959.063"/><line style="stroke:#a80036;stroke-width:1" x1="1496.5" x2="1537.5" y1="2959.063" y2="2959.063"/><polygon fill="#A80036" points="1506.5 2955.063 1496.5 2959.063 1506.5 2963.063 1502.5 2959.063" style="stroke:#a80036;stroke-width:1"/><text x="1502.5" y="2940.889" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">60</text><text x="1520.5" y="2940.889" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213">Create IoT Hub client with SAS token</text><polygon fill="#A80036" points="363.5 2984.297 353.5 2988.297 363.5 2992.297 359.5 2988.297" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="357.5" x2="1494.5" y1="2988.297" y2="2988.297"/><text x="369.5" y="2983.123" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">61</text><text x="387.5" y="2983.123" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113">Connect to IoT Hub</text><line style="stroke:#a80036;stroke-width:1" x1="352.5" x2="394.5" y1="3048" y2="3048"/><line style="stroke:#a80036;stroke-width:1" x1="394.5" x2="394.5" y1="3048" y2="3061"/><line style="stroke:#a80036;stroke-width:1" x1="353.5" x2="394.5" y1="3061" y2="3061"/><polygon fill="#A80036" points="363.5 3057 353.5 3061 363.5 3065 359.5 3061" style="stroke:#a80036;stroke-width:1"/><text x="359.5" y="3027.592" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">62</text><text x="377.5" y="3012.357" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262">Validate SAS token against SAS key that was</text><text x="377.5" y="3027.592" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293">registered when the Edge Hub identity was created</text><text x="377.5" y="3042.826" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81">by the runtime</text><polygon fill="#A80036" points="1483.5 3086.234 1493.5 3090.234 1483.5 3094.234 1487.5 3090.234" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="347.5" x2="1489.5" y1="3090.234" y2="3090.234"/><text x="354.5" y="3085.061" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">63</text><text x="372.5" y="3085.061" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17">OK</text></g></svg>