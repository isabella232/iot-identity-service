<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1455" height="1944" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1455px;height:1944px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1455 1944" zoomAndPan="magnify"><defs><filter id="f1e2o4c2zqpi3o" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect style="stroke:#a80036;stroke-width:1" width="705.5" height="1929.719" x="725" y="4" fill="#ADD8E6"/><text x="1056.75" y="16.061" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42">Device</text><rect style="stroke:#000;stroke-width:2" width="549.5" height="368.984" x="13" y="92.047" fill="#FFF" filter="url(#f1e2o4c2zqpi3o)"/><rect style="stroke:#000;stroke-width:2" width="673" height="135.406" x="140" y="475.031" fill="#FFF" filter="url(#f1e2o4c2zqpi3o)"/><rect style="stroke:#000;stroke-width:2" width="1296.5" height="1237.469" x="140" y="624.438" fill="#FFF" filter="url(#f1e2o4c2zqpi3o)"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="188" x2="188" y1="75.047" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="269" x2="269" y1="75.047" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="400.5" x2="400.5" y1="75.047" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="474.5" x2="474.5" y1="75.047" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="529.5" x2="529.5" y1="75.047" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="766" x2="766" y1="75.047" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="994.5" x2="994.5" y1="1113.359" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1165" x2="1165" y1="1320.406" y2="1878.906"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="1391.5" x2="1391.5" y1="1374.016" y2="1878.906"/><rect style="stroke:#a80036;stroke-width:1.5" width="72" height="30.406" x="150" y="39.641" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="157" y="59.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58">Operator</text><rect style="stroke:#a80036;stroke-width:1.5" width="72" height="30.406" x="150" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="157" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58">Operator</text><rect style="stroke:#a80036;stroke-width:1.5" width="63" height="30.406" x="236" y="39.641" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="243" y="59.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49">IoT Hub</text><rect style="stroke:#a80036;stroke-width:1.5" width="63" height="30.406" x="236" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="243" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49">IoT Hub</text><text x="359.5" y="71.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77">Edge device</text><ellipse cx="401" cy="42.641" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)" rx="12" ry="12" style="stroke:#a80036;stroke-width:2"/><line style="stroke:#a80036;stroke-width:2" x1="389" x2="413" y1="56.641" y2="56.641"/><text x="359.5" y="1890.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77">Edge device</text><ellipse cx="401" cy="1910.313" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)" rx="12" ry="12" style="stroke:#a80036;stroke-width:2"/><line style="stroke:#a80036;stroke-width:2" x1="389" x2="413" y1="1924.313" y2="1924.313"/><rect style="stroke:#a80036;stroke-width:1.5" width="41" height="30.406" x="452.5" y="39.641" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="459.5" y="59.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27">DPS</text><rect style="stroke:#a80036;stroke-width:1.5" width="41" height="30.406" x="452.5" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="459.5" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27">DPS</text><rect style="stroke:#a80036;stroke-width:1.5" width="41" height="30.406" x="507.5" y="39.641" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="514.5" y="59.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27">EST</text><rect style="stroke:#a80036;stroke-width:1.5" width="41" height="30.406" x="507.5" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="514.5" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27">EST</text><rect style="stroke:#a80036;stroke-width:1.5" width="70" height="46.813" x="729" y="23.234" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="736" y="43.223" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56">IoT Edge</text><text x="738.5" y="59.629" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51">runtime</text><rect style="stroke:#a80036;stroke-width:1.5" width="70" height="46.813" x="729" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="736" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56">IoT Edge</text><text x="738.5" y="1914.301" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51">runtime</text><rect style="stroke:#a80036;stroke-width:1.5" width="85" height="30.406" x="950.5" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="957.5" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71">EdgeAgent</text><rect style="stroke:#a80036;stroke-width:1.5" width="71" height="30.406" x="1128" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="1135" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57">EdgeHub</text><rect style="stroke:#a80036;stroke-width:1.5" width="66" height="46.813" x="1356.5" y="1877.906" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="1363.5" y="1897.895" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52">Custom</text><text x="1366" y="1914.301" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47">Module</text><path fill="#EEE" d="M13,92.0469 L137,92.0469 L137,99.0469 L127,109.0469 L13,109.0469 L13,92.0469" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="549.5" height="368.984" x="13" y="92.047" fill="none"/><text x="28" y="105.107" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79">Initial Setup</text><polygon fill="#A80036" points="518 141.75 528 145.75 518 149.75 522 145.75" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="524" y1="145.75" y2="145.75"/><text x="195" y="132.959" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">1</text><text x="206" y="125.342" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174">Register CA signing Cert (CA1)</text><text x="206" y="140.576" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131">for signing certificates</text><polygon fill="#A80036" points="518 186.219 528 190.219 518 194.219 522 190.219" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="524" y1="190.219" y2="190.219"/><text x="195" y="177.428" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">2</text><text x="206" y="169.81" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173">Register Identity CA Cert (CA2)</text><text x="206" y="185.045" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176">for signing identity certificates</text><path fill="#FBFB77" d="M23,203.2188 L23,243.2188 L349,243.2188 L349,213.2188 L339,203.2188 L23,203.2188" filter="url(#f1e2o4c2zqpi3o)" style="stroke:#a80036;stroke-width:1"/><path fill="#FBFB77" d="M339,203.2188 L339,213.2188 L349,213.2188 L339,203.2188" style="stroke:#a80036;stroke-width:1"/><text x="29" y="220.279" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188">CA1 and CA2 should be different</text><text x="29" y="235.514" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305">because device does have the CA cert signed by CA1</text><polygon fill="#A80036" points="518 315.625 528 319.625 518 323.625 522 319.625" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="524" y1="319.625" y2="319.625"/><text x="195" y="291.6" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">3</text><text x="206" y="268.748" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186">Register EST authentication cert</text><text x="206" y="283.982" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33">ESTC</text><text x="206" y="299.217" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191">(Used to authenticate against the</text><text x="206" y="314.451" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68">EST server)</text><polygon fill="#A80036" points="463 360.094 473 364.094 463 368.094 467 364.094" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="469" y1="364.094" y2="364.094"/><text x="195" y="351.303" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">4</text><text x="206" y="343.685" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166">Create group enrollment with</text><text x="206" y="358.92" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158">Identity CA Certificate (CA2)</text><polygon fill="#A80036" points="389 404.563 399 408.563 389 412.563 393 408.563" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="395" y1="408.563" y2="408.563"/><text x="195" y="395.772" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">5</text><text x="206" y="388.154" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170">Install DIdC on the device (file</text><text x="206" y="403.389" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94">system or HSM)</text><polygon fill="#A80036" points="389 449.031 399 453.031 389 457.031 393 453.031" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="395" y1="453.031" y2="453.031"/><text x="195" y="440.24" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">6</text><text x="206" y="432.623" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175">Install ESTC on the device (file</text><text x="206" y="447.857" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94">system or HSM)</text><path fill="#EEE" d="M140,475.0313 L386,475.0313 L386,482.0313 L376,492.0313 L140,492.0313 L140,475.0313" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="673" height="135.406" x="140" y="475.031" fill="none"/><text x="155" y="488.092" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201">Device setup and configuration</text><polygon fill="#A80036" points="754 524.734 764 528.734 754 532.734 758 528.734" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="760" y1="528.734" y2="528.734"/><text x="195" y="515.943" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">7</text><text x="206" y="508.326" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141">Configure device to sign</text><text x="206" y="523.561" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166">certificates using EST server</text><polygon fill="#A80036" points="754 569.203 764 573.203 754 577.203 758 573.203" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="760" y1="573.203" y2="573.203"/><text x="195" y="560.412" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">8</text><text x="206" y="552.795" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146">Configure device for DPS</text><text x="206" y="568.029" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72">provisioning</text><polygon fill="#A80036" points="754 598.438 764 602.438 754 606.438 758 602.438" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="760" y1="602.438" y2="602.438"/><text x="195" y="597.264" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7">9</text><text x="206" y="597.264" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124">Configure EdgeAgent</text><path fill="#EEE" d="M140,624.4375 L280,624.4375 L280,631.4375 L270,641.4375 L140,641.4375 L140,624.4375" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="1296.5" height="1237.469" x="140" y="624.438" fill="none"/><text x="155" y="637.498" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95">Device running</text><polygon fill="#A80036" points="754 658.906 764 662.906 754 666.906 758 662.906" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="188" x2="760" y1="662.906" y2="662.906"/><text x="195" y="657.732" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">10</text><text x="213" y="657.732" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130">Start IoT Edge runtime</text><line style="stroke:#a80036;stroke-width:1" x1="766" x2="808" y1="707.375" y2="707.375"/><line style="stroke:#a80036;stroke-width:1" x1="808" x2="808" y1="707.375" y2="720.375"/><line style="stroke:#a80036;stroke-width:1" x1="767" x2="808" y1="720.375" y2="720.375"/><polygon fill="#A80036" points="777 716.375 767 720.375 777 724.375 773 720.375" style="stroke:#a80036;stroke-width:1"/><text x="773" y="694.584" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">11</text><text x="791" y="686.967" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197">Generate CSR to get idenitity cert (</text><text x="791" y="702.201" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33">DIdC)</text><polygon fill="#A80036" points="541 745.609 531 749.609 541 753.609 537 749.609" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="535" x2="765" y1="749.609" y2="749.609"/><text x="547" y="744.436" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">12</text><text x="565" y="744.436" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115">CSR for identity cert</text><polygon fill="#A80036" points="754 774.844 764 778.844 754 782.844 758 778.844" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="530" x2="760" y1="778.844" y2="778.844"/><text x="537" y="773.67" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">13</text><text x="555" y="773.67" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194">Identity cert DIdC signed with CA2</text><line style="stroke:#a80036;stroke-width:1" x1="766" x2="808" y1="823.313" y2="823.313"/><line style="stroke:#a80036;stroke-width:1" x1="808" x2="808" y1="823.313" y2="836.313"/><line style="stroke:#a80036;stroke-width:1" x1="767" x2="808" y1="836.313" y2="836.313"/><polygon fill="#A80036" points="777 832.313 767 836.313 777 840.313 773 836.313" style="stroke:#a80036;stroke-width:1"/><text x="773" y="810.521" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">14</text><text x="791" y="802.904" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177">Generate CSR to get device CA</text><text x="791" y="818.139" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67">cert (DCAC)</text><polygon fill="#A80036" points="541 861.547 531 865.547 541 869.547 537 865.547" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="535" x2="765" y1="865.547" y2="865.547"/><text x="547" y="860.373" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">15</text><text x="565" y="860.373" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89">CSR for CA cert</text><polygon fill="#A80036" points="754 906.016 764 910.016 754 914.016 758 910.016" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="530" x2="760" y1="910.016" y2="910.016"/><text x="537" y="897.225" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">16</text><text x="555" y="889.607" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190">Device CA Cert DCAC signed with</text><text x="555" y="904.842" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23">CA1</text><polygon fill="#A80036" points="486 950.484 476 954.484 486 958.484 482 954.484" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="480" x2="765" y1="954.484" y2="954.484"/><text x="492" y="941.693" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">17</text><text x="510" y="934.076" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94">Provision device</text><text x="510" y="949.311" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55">with DIdC</text><polygon fill="#A80036" points="280.5 994.953 270.5 998.953 280.5 1002.953 276.5 998.953" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="274.5" x2="474" y1="998.953" y2="998.953"/><text x="286.5" y="986.162" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">18</text><text x="304.5" y="978.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105">Create device with</text><text x="304.5" y="993.779" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131">thumbprint based auth</text><polygon fill="#A80036" points="463 1024.188 473 1028.188 463 1032.188 467 1028.188" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="269.5" x2="469" y1="1028.188" y2="1028.188"/><text x="276.5" y="1023.014" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">19</text><text x="294.5" y="1023.014" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65">Device info</text><polygon fill="#A80036" points="754 1068.656 764 1072.656 754 1076.656 758 1072.656" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="475" x2="760" y1="1072.656" y2="1072.656"/><text x="482" y="1059.865" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">20</text><text x="500" y="1052.248" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97">Provisioning info</text><text x="500" y="1067.482" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116">(IoTHub + deviceId)</text><polygon fill="#A80036" points="938.5 1097.891 948.5 1101.891 938.5 1105.891 942.5 1101.891" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="766" x2="944.5" y1="1101.891" y2="1101.891"/><text x="773" y="1096.717" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">21</text><text x="791" y="1096.717" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91">Create and start</text><rect style="stroke:#a80036;stroke-width:1.5" width="85" height="30.406" x="950.5" y="1080.656" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="957.5" y="1100.645" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71">EdgeAgent</text><line style="stroke:#a80036;stroke-width:1" x1="995" x2="1037" y1="1147.297" y2="1147.297"/><line style="stroke:#a80036;stroke-width:1" x1="1037" x2="1037" y1="1147.297" y2="1160.297"/><line style="stroke:#a80036;stroke-width:1" x1="996" x2="1037" y1="1160.297" y2="1160.297"/><polygon fill="#A80036" points="1006 1156.297 996 1160.297 1006 1164.297 1002 1160.297" style="stroke:#a80036;stroke-width:1"/><text x="1002" y="1142.123" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">22</text><text x="1020" y="1142.123" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119">Process deployment</text><polygon fill="#A80036" points="777 1216 767 1220 777 1224 773 1220" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="771" x2="994" y1="1220" y2="1220"/><text x="783" y="1199.592" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">23</text><text x="801" y="1184.357" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130">Update credentials for</text><text x="801" y="1199.592" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173">EdgeAgent and EdgeHub with</text><text x="801" y="1214.826" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54">SAS auth</text><polygon fill="#A80036" points="280.5 1275.703 270.5 1279.703 280.5 1283.703 276.5 1279.703" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="274.5" x2="765" y1="1279.703" y2="1279.703"/><text x="286.5" y="1259.295" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">24</text><text x="304.5" y="1244.061" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130">Update credentials for</text><text x="304.5" y="1259.295" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173">EdgeAgent and EdgeHub with</text><text x="304.5" y="1274.529" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54">SAS auth</text><polygon fill="#A80036" points="1116 1304.938 1126 1308.938 1116 1312.938 1120 1308.938" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="995" x2="1122" y1="1308.938" y2="1308.938"/><text x="1002" y="1303.764" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">25</text><text x="1020" y="1303.764" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91">Create and start</text><rect style="stroke:#a80036;stroke-width:1.5" width="71" height="30.406" x="1128" y="1287.703" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="1135" y="1307.691" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57">EdgeHub</text><polygon fill="#A80036" points="1344.5 1350.344 1354.5 1354.344 1344.5 1358.344 1348.5 1354.344" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="995" x2="1350.5" y1="1354.344" y2="1354.344"/><text x="1002" y="1349.17" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">26</text><text x="1020" y="1349.17" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91">Create and start</text><rect style="stroke:#a80036;stroke-width:1.5" width="66" height="46.813" x="1356.5" y="1333.109" fill="#FEFECE" filter="url(#f1e2o4c2zqpi3o)"/><text x="1363.5" y="1353.098" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52">Custom</text><text x="1366" y="1369.504" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47">Module</text><polygon fill="#A80036" points="777 1412.156 767 1416.156 777 1420.156 773 1416.156" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="771" x2="1164.5" y1="1416.156" y2="1416.156"/><text x="783" y="1410.982" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">27</text><text x="801" y="1410.982" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83">Get server cert</text><line style="stroke:#a80036;stroke-width:1" x1="766" x2="808" y1="1445.391" y2="1445.391"/><line style="stroke:#a80036;stroke-width:1" x1="808" x2="808" y1="1445.391" y2="1458.391"/><line style="stroke:#a80036;stroke-width:1" x1="767" x2="808" y1="1458.391" y2="1458.391"/><polygon fill="#A80036" points="777 1454.391 767 1458.391 777 1462.391 773 1458.391" style="stroke:#a80036;stroke-width:1"/><text x="773" y="1440.217" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">28</text><text x="791" y="1440.217" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182">Generate server cert from DCAC</text><polygon fill="#A80036" points="1153.5 1483.625 1163.5 1487.625 1153.5 1491.625 1157.5 1487.625" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="766" x2="1159.5" y1="1487.625" y2="1487.625"/><text x="773" y="1482.451" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">29</text><text x="791" y="1482.451" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62">Server cert</text><polygon fill="#A80036" points="777 1512.859 767 1516.859 777 1520.859 773 1516.859" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="771" x2="1390.5" y1="1516.859" y2="1516.859"/><text x="783" y="1511.686" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">30</text><text x="801" y="1511.686" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96">Get local identity</text><line style="stroke:#a80036;stroke-width:1" x1="766" x2="808" y1="1546.094" y2="1546.094"/><line style="stroke:#a80036;stroke-width:1" x1="808" x2="808" y1="1546.094" y2="1559.094"/><line style="stroke:#a80036;stroke-width:1" x1="767" x2="808" y1="1559.094" y2="1559.094"/><polygon fill="#A80036" points="777 1555.094 767 1559.094 777 1563.094 773 1559.094" style="stroke:#a80036;stroke-width:1"/><text x="773" y="1540.92" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">31</text><text x="791" y="1540.92" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178">Generate client cert from DCAC</text><polygon fill="#A80036" points="1379.5 1584.328 1389.5 1588.328 1379.5 1592.328 1383.5 1588.328" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="766" x2="1385.5" y1="1588.328" y2="1588.328"/><text x="773" y="1583.154" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">32</text><text x="791" y="1583.154" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120">Module local identity</text><polygon fill="#A80036" points="1176.5 1613.563 1166.5 1617.563 1176.5 1621.563 1172.5 1617.563" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="1170.5" x2="1390.5" y1="1617.563" y2="1617.563"/><text x="1182.5" y="1612.389" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">33</text><text x="1200.5" y="1612.389" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181">Connect using mutual TLS auth</text><polygon fill="#A80036" points="1176.5 1658.031 1166.5 1662.031 1176.5 1666.031 1172.5 1662.031" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="1170.5" x2="1390.5" y1="1662.031" y2="1662.031"/><text x="1182.5" y="1649.24" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">34</text><text x="1200.5" y="1641.623" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181">Pub/sub to MQTT Broker using</text><text x="1200.5" y="1656.857" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84">custom topics</text><polygon fill="#A80036" points="777 1687.266 767 1691.266 777 1695.266 773 1691.266" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="771" x2="1164.5" y1="1691.266" y2="1691.266"/><text x="783" y="1686.092" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">35</text><text x="801" y="1686.092" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112">Get IoTHub identity</text><polygon fill="#A80036" points="1153.5 1731.734 1163.5 1735.734 1153.5 1739.734 1157.5 1735.734" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="766" x2="1159.5" y1="1735.734" y2="1735.734"/><text x="773" y="1722.943" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">36</text><text x="791" y="1715.326" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193">Identity info (IoTHub + deviceId +</text><text x="791" y="1730.561" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187">generation Id + credentials type)</text><polygon fill="#A80036" points="777 1760.969 767 1764.969 777 1768.969 773 1764.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="771" x2="1164.5" y1="1764.969" y2="1764.969"/><text x="783" y="1759.795" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">37</text><text x="801" y="1759.795" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63">Sign token</text><polygon fill="#A80036" points="1153.5 1805.438 1163.5 1809.438 1153.5 1813.438 1157.5 1809.438" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="766" x2="1159.5" y1="1809.438" y2="1809.438"/><text x="773" y="1796.647" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">38</text><text x="791" y="1789.029" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175">Token signed with EdgeHub&apos;s</text><text x="791" y="1804.264" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50">SAS Key</text><polygon fill="#A80036" points="280.5 1849.906 270.5 1853.906 280.5 1857.906 276.5 1853.906" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="274.5" x2="1164.5" y1="1853.906" y2="1853.906"/><text x="286.5" y="1841.115" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14">39</text><text x="304.5" y="1833.498" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193">Connect using token and forward</text><text x="304.5" y="1848.732" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53">telemetry</text></g></svg>